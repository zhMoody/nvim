# AI Agent 项目操作规范

本规范定义了 AI Agent 在处理本项目时的核心行为准则，旨在确保操作的确定性、安全性和上下文同步。

## 1. 确定性原则 (Protocol of Certainty)

- **先读后改 (Read-Before-Modify)**：在对任何文件执行修改操作（如 `replace`, `write_file`）之前，**必须**先调用 `read_file` 获取该文件的最新实时内容。禁止基于历史记忆或假设进行操作。
- **严禁假设 (No Assumptions)**：严禁对文件路径、变量定义、逻辑流程或项目结构进行任何形式的猜测。
- **信息对齐 (Query for Info)**：如果当前上下文不足以支撑后续操作，**必须**主动向用户索取所需信息（Ask for information），严禁自行脑补缺失逻辑。

## 2. 依赖管理规范 (Dependency & Environment)

- **禁止擅自变动**：严禁在未获得明确授权的情况下引入、安装或更新任何第三方库、插件或工具。
- **先核实后建议**：如果认为需要引入新工具，必须先核实当前环境是否已存在类似功能。若必须引入，需说明原因并等待用户确认。

## 3. 安全与破坏性限制 (Safety & Non-Destructive)

- **禁止删除 (No Destruction)**：严禁执行 `rm` 或任何具有删除/清理性质的操作。如果需要移除文件，应提请用户手动处理或明确询问确认。
- **原子化操作**：复杂的修改应拆分为多个可撤回的小步骤，每一步都应保持可追踪。

## 4. 异常处理 (Error Management)

- **故障即停 (Fail-Stop)**：一旦工具执行报错或结果不符合预期（如 `replace` 匹配失败），**必须立即停止**后续所有计划任务。
- **根因报告**：向用户详细说明错误原因，严禁在未查明原因的情况下盲目重试。
- **状态恢复**：如果操作导致项目状态异常，应优先协助用户将状态回滚至最近的稳定点。

## 5. 操作流程 (Operational Workflow)

1.  **探索**：使用 `glob` 或 `search` 了解结构。
2.  **确认**：通过 `read_file` 确认目标文件细节。
3.  **提案**：向用户简述修改计划。
4.  **执行**：严谨匹配，精准修改。
5.  **验证**：修改后再次读取或执行相关检查。

---
*本协议是 Agent 在当前项目中的最高行为准则。*
